# 프로그래밍 언어 처리

## 어셈블리 언어
- 비트 조합을 외우기 싫었기 때문..
- 니모닉을 통해 명령어를 쓸 수 있다.
- 주소에 이름, 즉 레이블을 붙일 수 있다.
- 코드에 주석을 달 수 있다.
- 어셈블리어를 읽어서 기계어를 생성하는 프로그램을 어셈블러라고 한다.
- bss라는 의사 명령어는 메모리 덩어리를 예약하되 아무 값도 넣지 않는다.
  - 기계어와 대응이 되진 않지만, 어셈블러에게 지시를 내린다.
- 최초의 어셈블러는 손으로 모든 비트를 알아낸 개발자들에 의해 만들어졌다..
- 부트스트랩이란 말이 그래서 생겨났다.
  - 작은 프로그램을 불러와 필요한 초기화를 하고, 더 큰 프로그램을 읽어오고, 필요한 뭔가를 하고..

## 고수준 언어
- 복잡한 작업을 위해 더 적은 단어를 쓸 수는 없을까?
- 어셈블리보다 더 높은 추상화 단계.
- 고수준 언어 소스 코드는 컴파일러에 의해 컴파일되어 기계어 목적 코드로 번역된다.
- 처음 생긴 고수준 언어 중 포트란이 있다.
  - 코드에 수학적 관례를 많이 들여 온 언어기도 하다.
- 작은 기게에서 사용할 언어로 베이직이 만들어졌다.
- 다만 이런 언어들은 GOTO와 줄 번호로 이루어진 연결을 관리하기가 점점 힘들어졌단 것.

## 구조적 프로그래밍
- 포트란이나 베이직은 비구조적 언어이다. GOTO와 레이블을 조합할 때 아무런 구조를 강요하지 않기 때문.
- 구조적 프로그래밍은 이로 인한 스파게티 코드 문제를 해결하기 위해 생겨났다.
- C, Python, JavaScript, ...

## 어휘 분석
- 그럼 이런 언어들은 어떻게 처리될까?
- 어휘 분석은 코드를 기호에서 토큰으로 변환하는 과정이다. (공백은 토큰 아님)
- 토큰은 유형이 많기 때문에 또 구분해야 한다. 연산자, 변수, 상수, ...
- 형식이 잘 갖춰진 정의도 물론 있다. 배커스-나우르 표기법이라던지.

### 상태 기계
- 부동소수점 상수를 나타내는 것만 해도 각 토큰의 "상태"에 따라 엄청나게 복잡해졌다.
- 상태로 이루어진 집합과, 한 상태에서 다른 상태로 전이되는 원인의 목록으로 이루어진 "상태 기계"를 만들 수 있다.
- 상태 기계를 사용하면 간단한 코드를 사용해 입력을 분류할 수 있다.

### 정규식
- 언어를 지정하기 위한 언어를 정의하면 어떨까?
- grep은 사실 globally search a regular expression and print의 약자라는 사실. wow
- 정규식은 패턴 매칭에서 중추적 역할을 한다.
- 정규식 사용법은 레퍼런스 좋은 거 많으니 그걸 참조..
- lex도 일단 넘어가기..

## 단어에서 문장으로
- 언어를 처리하려면 여러 단어를 모아 문법에 맞는 문장으로 분석해야 한다.
- 지금까지 한 것이 문자 시퀀스를 토큰으로 나타낸 것이라면, 토큰 시퀀스를 패턴 매칭해야 한다는 것.
- 벨 연구소 당신은 대체.. 
- shift-reduce parser.
  - 시프트는 토큰을 스택에 넣기, 리듀스는 맨 위부터 매치된 토큰을 다른 무언가로 대치하기.

## 누구나 프로그래밍 언어를 만들 수 있는 시대
- (ㅇㄱㅈㅉㅇㅇ?)
- Principles of Compiler Design
- 요컨대, 여태까지 쌓인 언어에 대한 지식을 바탕으로 도메인 특화 언어를 만들 수 있다는 것.

## 파스 트리
- 고수준 언어의 실행 방법은 컴파일에만 있지 않다! 인터프리트할 수도 있는 것.
- 인터프리터 언어는 가상 머신에서 돌아갈 것을 상정한다.
- 중간 언어로 컴파일되기도 하고, 인터프리터가 직접 실행하기도 하고.
- 당연한 말이지만 컴파일 언어보다는 느리다.
- 컴파일러든 인터프리터든, 파스 트리를 구성한다. 
  - 언어 문법으로부터 만들어낸 DAG 데이터 구조다.
  - 노드 유형을 표시하는 code와 리프 노드의 배열이 있다.
  - 각 리프의 해석은 code에 따라 달라진다.

## 인터프리터
- 파스 트리의 루트를 인자로 받아서 작업을 해 봅시다.
- 상술한 code 정보에 따라 어떤 일을 할 지 결정할 수 있다.
- 어휘 분석 - 문법 파싱 - 파스 트리(중간 언어) - 기계 n 백엔드

## 컴파일러
- 어휘 분석 - 문법 파싱 - 파스 트리(중간 언어) - 기계 n 코드 생성기 - 기계 n 어셈블리어 - 기계 n 어셈블러 - 기계 n 기계어

## 최적화
- 파스 트리와 코드 생성기 사이에 보통 들어간다.
- 파스 트리를 분석하고 분석 결과를 통해 더 효율적인 코드를 생성해내도록 파스 트리를 변환한다.
- 상수 미리 계산하기, 루프 돌려도 변하지 않는 값을 루프 밖으로 꺼내기(!!!) 등 다양한 동작을 한다.
- 강도 절감이라는, 비용이 더 적은 연산으로의 대체도 할 수 있다.

## 하드웨어를 다룰 때 주의하라
- 최적화기가 하드웨어 조작 코드를 함부로 최적화하면 큰일이 날 수도 있다.